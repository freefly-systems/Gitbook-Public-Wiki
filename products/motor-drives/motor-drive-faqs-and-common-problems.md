# Motor Drive FAQ's and Common Problems

**My motor drive disconnects a lot when I'm trying to work on it over USB. What's wrong?**: The motor drive can produce a high EMI environment, especially when spinning motors at high currents, during fault situations, etc. The USB protocol is very susceptible to this noise and it can be difficult to keep reliable connections. You should try to avoid using USB extension cables to connect the drive to a computer as this is going to make connection integrity much worse. Also try using a USB port on the back of the computer \(directly on the motherboard\) as the extension to a front port on a desktop computer can degrade signal integrity. If you need to use an extension, make it as short as possible and if possible place some ferrite rings on it. When extensions must be used, reliability can be improved by placing a USB hub at the end of the extension and plugging the drive into that. This acts as a repeater and can mitigate much of the EMI issues, although it's still ideal to be plugged directly into a computer. An even better option is using an isolated USB repeater \(we've had pretty good luck with these: [https://buy.advantech-bb.com/USB-Communications/USB-Isolators/BBC13251.products.htm](https://buy.advantech-bb.com/USB-Communications/USB-Isolators/BBC13251.products.htm)\). Ultimately, USB should really only be used for drive configuration and testing rather than control of an installation. Even with an isolator and no extension cables, it will still not be a perfectly robust system. You should be able to get it good enough to easily perform configuration and test sessions without much stress though!

**When configured in** _**Torque Forward Only**_ **mode, the motor makes popping noises instead of effectively braking at low speeds or when the tire locks up \(either sensored or sensorless\):** The drive is actually doing what it should, but an undesirable natural oscillation occurs near zero speed with high regen braking. When the tire stops spinning, the braking torque makes it want to start spinning backwards. The forward-only mode prohibits this and cuts torque if the motor isn't spinning forward. Once torque is cut, the inertia of the vehicle starts the motor forward again, and once again there is regen braking. This cycle repeats with the motor constantly starting to spin backwards then have torque cut off. The result is a series of popping noises while the ESC is preventing reverse tire spin \(much like the vibration you feel in the brake pedal when a car's ABS becomes activated\). This is a pretty undesirable behavior as it's a loud and unpleasant pop, plus you lose much of the power of the regen brakes when the wheels lock.

As of firmware version 1.1.1, there is an easy fix for this. Just set the _Torque-Forward-Only Regen Foldback Start-Below PWM_ parameter to a higher value. For most motors, about 2% will get rid of this behavior, which is the default value for a reset Arc200 drive. This parameter makes the max regen command linearly fold back from the programmed maximum to zero over the range from 0% PWM width up to the parameter's programmed value. By creating this region where the regen command is being reduced, a steady-state operating point is found when full regen commands are given near low speed. In fact if you watch closely you will be able to see the tire very slowly spin forward when it locks up on a low-traction surface. This operating point of braking stability eliminates the popping and reduction in braking effectiveness.

**When I push my throttle full acceleration or full braking, it doesn't feel like I'm getting anywhere near the programmed max acceleration or regen current.** Make sure your throttle ranges are configured correctly in the throttle setup section of configuration! You can use the throttle setup wizard to help set the end-points. A mis-configured throttle will not necessarily ever reach the programmed max acceleration current. After you configure your throttle, it's a good idea to connect to the GUI and make sure that when you push your throttle all the way forward or brake, that the commanded Q-axis current on the telemetry window is roughly equal to the programmed maximum \(it might just barely not reach it due to rounding errors throughout a variety of current foldback and limiting systems\).

**When I'm commanding zero current in torque mode \(neither acceleration nor braking\), the motor either accelerates or feels like it is excessively braking. How do I set the bias-point of a zero current command so that zero current command is as close to true coasting as possible?** Due to the switching nature of a motor drive coupled with imperfections in a motor's physical construction, there is always some error between the motor drive measuring zero-current, and the motor actually carrying zero current. Usually, this is no more than a few amps and is typically speed dependent such that the error gets higher as the motor spins faster. As of firmware version 1.1.1 and later, there is a _Current Command Offset_ parameter in the Control section of the drive configuration. If your motor accelerates when commanded with zero current \(usually, this will only happen with no drive train connected since even the slightest mechanical damping would stop it\), then you need a slightly more negative value for this. If your motor rapidly stops and feels like it has too much braking when commanded with zero current, you need a value closer to zero. The default value is -0.15A/\(VDC \* PWMdec\) since most motors need a little bit of offset to stop when provided with a zero current command at higher speeds. 

**When I have a high max torque command \(usually you run into this at 150A or greater commands\) sometimes it just pops when given high throttle instead of giving torque.** A few things to try:

* Increasing the inductance setting by around 50-75% higher than what the autotune process gives can help reduce this effect. If you go too far on this, you may notice a loss of acceleration.
* Using a faster current loop tuning can help. Try the 'Fastest with Current Filtering' option in the Current Loop Tuning Wizard. If you have experience tuning control loops you can try going for an even higher crossover frequency than this tuning results in but in most cases you can't get much faster.
* Try reducing the DQ Park Filter/Super-DQ Park Filter in the configuration \(unless it's already zero\). Most autotune results will give 5ms here, but try something like 0.5ms, it may help.
* If you're running sensors \(especially hall-sensors\), the sensor might not work well at higher speeds. Make sure you setup the "Sensorless Transition Start" and "Sensorless Transition End" parameters to appropriately low values. Usually a few hundred RPM. Below the "start" parameter, the motor is fully sensored. Above the "end" parameter, the motor is fully sensorless. Between the two, it linearly transitions between sensored and sensorless to avoid a discrete mode change.
* Ultimately, once you've done both of the above your best bet is to just reduce the 'Max Phase Accel Current' parameter until the problem goes away. For example many motors will run into this problem when you set the max phase accel current to 200A, but are totally fine at 180-190A.

**When a motor is trying to start in Jitter mode, it just shakes but never actually goes into normal closed-loop operation no matter what, or struggles to exit jitter mode even when no mechanical load is holding it back:** Try either increasing the Jitter Speed 1 and 2 parameters and/or reducing the Minimum Diff Flux parameter slightly \(Not by much! It's rare you need to lower the min diff flux from the suggested value in the autotune pop-up\).

**When coming to a stop in torque mode, the motor makes a very brief pop as the shaft stops spinning:** If in torque-forward-only mode, increase the "Torque-Forward-Only Regen Foldback Start-Below PWM" parameter. Default is 2% but going as high as 5-10% may be helpful in some cases. If that doesn't fix it or you're not in that operating mode, try slightly increasing the Minimum Diff Flux parameter \(no more than 2x what the autotune pop-up suggests for that parameter at the most\).

**Why can't I see my motor drive as a BTLE device?**

Starting in Arc200 firmware v1.1.9, there is an option in the drive-specific functions section of configuration to disable BTLE. This may be used if there are concerns about security with having an open BTLE device for configuration. By default from the factory, this is set to 'No' which leaves BTLE enabled. If you changed this to 'Yes', then your drive will be silent on BTLE and you need to connect to the drive to re-enable BTLE. You will need to power-cycle the drive after saving this setting to flash to complete the enable or disable of the BTLE feature.

